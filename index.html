<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shelf - Scans to structured text</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        nav {
            padding: 20px 0;
            border-bottom: 1px solid #333;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
            text-decoration: none;
        }

        .github-link {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .github-link:hover {
            background-color: #3b82f6;
            color: #ffffff;
        }

        .hero {
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: #ffffff;
        }

        .hero-description {
            font-size: 1.125rem;
            color: #cccccc;
            max-width: 800px;
            margin: 0 auto;
            text-align: left;
        }

        .hero-description p {
            margin-bottom: 20px;
        }

        .pipeline {
            padding: 80px 0;
        }

        .pipeline h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
            color: #ffffff;
        }

        .pipeline-intro {
            font-size: 1.125rem;
            color: #cccccc;
            max-width: 800px;
            margin: 0 auto 60px auto;
            text-align: center;
        }

        .pipeline-flow {
            display: grid;
            gap: 40px;
            margin-top: 40px;
        }

        .stage {
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 30px;
            position: relative;
        }

        .stage-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stage-icon {
            font-size: 2rem;
        }

        .stage-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
        }

        .stage-description {
            color: #cccccc;
            margin-bottom: 25px;
        }

        .phases {
            margin-top: 20px;
        }

        .phases-title {
            font-size: 1rem;
            font-weight: 600;
            color: #3b82f6;
            margin-bottom: 15px;
        }

        .phase {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
        }

        .phase::before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #3b82f6;
            font-weight: 600;
        }

        .phase-name {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            color: #ffffff;
            font-size: 0.9rem;
        }

        .phase-description {
            color: #aaaaaa;
            font-size: 0.9rem;
            margin-left: 10px;
        }

        .stats {
            padding: 60px 0;
            text-align: center;
            border-top: 1px solid #333;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            max-width: 600px;
            margin: 0 auto;
        }

        .stat {
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #3b82f6;
            display: block;
        }

        .stat-label {
            color: #cccccc;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        footer {
            padding: 40px 0;
            text-align: center;
            border-top: 1px solid #333;
            color: #666;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-description {
                font-size: 1rem;
            }

            .pipeline h2 {
                font-size: 2rem;
            }

            .pipeline-intro {
                font-size: 1rem;
            }

            .stage {
                padding: 20px;
            }

            .stage-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .stage-title {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <div class="nav-content">
                <a href="#" class="logo">shelf</a>
                <a href="https://github.com/jackzampolin/shelf" class="github-link">GitHub</a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="container">
            <h1>Scans to structured text</h1>
            <div class="hero-description">
                <p>Not every book is available as an audiobook. Military history, academic texts, out-of-print nonfiction‚Äîif you want to listen to them, you have to make them yourself.</p>
                
                <p>Raw OCR gets you text, but text mixed with garbage‚Äîpage numbers read aloud, running headers interrupting every page, image captions scattered through the text, footnote numbers with no footnotes. The result is technically an audiobook, but not one you'd want to listen to.</p>
                
                <p>Getting something close to the quality of a professionally produced Audible audiobook‚Äîwith no user discernible issues‚Äîturns out to be an unsolved problem. Those audiobooks have human editors. Getting that quality with software alone, with little to no human intervention, is the challenge shelf is designed to solve.</p>
            </div>
        </div>
    </section>

    <section class="pipeline">
        <div class="container">
            <h2>Pipeline</h2>
            <p class="pipeline-intro">Once you have a book scan (either from a sheet-fed scanner after cutting the spine, or a non-destructive overhead scanner), shelf runs it through a multi-stage AI pipeline. Each stage builds on the last: multiple OCR providers extract the text, LLMs classify and label the structure (body text vs headers vs footnotes vs page numbers), the table of contents is extracted and linked to actual pages, and finally clean ePub files are produced‚Äîtext that flows when read aloud.</p>
            
            <div class="pipeline-flow">
                <div class="stage">
                    <div class="stage-header">
                        <span class="stage-icon">üì∑</span>
                        <h3 class="stage-title">OCR Pages</h3>
                    </div>
                    <p class="stage-description">Extract text from scanned page images using vision AI models</p>
                    <div class="phases">
                        <div class="phases-title">Phases:</div>
                        <div class="phase">
                            <span class="phase-name">ocr</span>
                            <span class="phase-description">Extract text using multiple OCR providers in parallel</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">blend</span>
                            <span class="phase-description">Combine OCR outputs into best-quality text</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">metadata</span>
                            <span class="phase-description">Extract book metadata using AI with web search</span>
                        </div>
                    </div>
                </div>

                <div class="stage">
                    <div class="stage-header">
                        <span class="stage-icon">üè∑Ô∏è</span>
                        <h3 class="stage-title">Label Structure</h3>
                    </div>
                    <p class="stage-description">Classify content blocks as body text, headers, footnotes, or page numbers</p>
                    <div class="phases">
                        <div class="phases-title">Phases:</div>
                        <div class="phase">
                            <span class="phase-name">mechanical</span>
                            <span class="phase-description">Extract patterns using regex and heuristics</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">unified</span>
                            <span class="phase-description">Classify page elements with vision LLM</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">gap_analysis</span>
                            <span class="phase-description">Identify pages with missing or uncertain labels</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">agent_healing</span>
                            <span class="phase-description">Fix classification gaps using LLM agent</span>
                        </div>
                    </div>
                </div>

                <div class="stage">
                    <div class="stage-header">
                        <span class="stage-icon">üìë</span>
                        <h3 class="stage-title">Extract ToC</h3>
                    </div>
                    <p class="stage-description">Identify and extract the table of contents from OCR output</p>
                    <div class="phases">
                        <div class="phases-title">Phases:</div>
                        <div class="phase">
                            <span class="phase-name">find</span>
                            <span class="phase-description">Locate ToC pages using vision agent</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">extract</span>
                            <span class="phase-description">Parse ToC entries from identified pages</span>
                        </div>
                    </div>
                </div>

                <div class="stage">
                    <div class="stage-header">
                        <span class="stage-icon">üîó</span>
                        <h3 class="stage-title">Link ToC</h3>
                    </div>
                    <p class="stage-description">Map table of contents entries to their corresponding page numbers</p>
                    <div class="phases">
                        <div class="phases-title">Phases:</div>
                        <div class="phase">
                            <span class="phase-name">find_entries</span>
                            <span class="phase-description">Locate each ToC entry in page content</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">pattern</span>
                            <span class="phase-description">Analyze heading patterns to find chapter sequences</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">discover</span>
                            <span class="phase-description">Search for each entry in detected patterns</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">merge</span>
                            <span class="phase-description">Merge results into enriched ToC</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">validation</span>
                            <span class="phase-description">Validate page coverage and investigate gaps</span>
                        </div>
                    </div>
                </div>

                <div class="stage">
                    <div class="stage-header">
                        <span class="stage-icon">üèóÔ∏è</span>
                        <h3 class="stage-title">Build Structure</h3>
                    </div>
                    <p class="stage-description">Assemble unified document structure with chapter text and metadata</p>
                    <div class="phases">
                        <div class="phases-title">Phases:</div>
                        <div class="phase">
                            <span class="phase-name">build_structure</span>
                            <span class="phase-description">Build document skeleton from ToC and detected headings</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">polish_entries</span>
                            <span class="phase-description">Extract and polish chapter text with LLM (parallel)</span>
                        </div>
                        <div class="phase">
                            <span class="phase-name">merge</span>
                            <span class="phase-description">Merge polished entries into final structure.json</span>
                        </div>
                    </div>
                </div>

                <div class="stage">
                    <div class="stage-header">
                        <span class="stage-icon">üìñ</span>
                        <h3 class="stage-title">Generate Output</h3>
                    </div>
                    <p class="stage-description">Create ePub files, audiobook scripts, or structured API output</p>
                    <div class="phases">
                        <div class="phases-title">Phases:</div>
                        <div class="phase">
                            <span class="phase-name">generate_epub</span>
                            <span class="phase-description">Build and validate ePub 3.0 file</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat">
                    <span class="stat-number">33,180</span>
                    <span class="stat-label">Lines of Python</span>
                </div>
                <div class="stat">
                    <span class="stat-number">6</span>
                    <span class="stat-label">Pipeline Stages</span>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>shelf ¬© 2024</p>
        </div>
    </footer>
</body>
</html>