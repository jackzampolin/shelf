type Chapter {
    # Many-to-one: Chapter belongs to Book
    # Note: DefraDB auto-creates book_id field of type ID for this relationship
    book: Book

    # Optional link to source ToC entry
    # Note: DefraDB auto-creates toc_entry_id field of type ID for this relationship
    toc_entry: TocEntry

    # Unique key for upsert support (preserves DocID/CID history on re-run)
    # Format: "{book_id}:{toc_entry_id}" or "{book_id}:orphan:{sort_order}"
    unique_key: String @index

    # Identity
    entry_id: String
    sort_order: Int

    # From ToC
    title: String
    level: Int
    level_name: String
    entry_number: String

    # Page boundaries (scan page numbers)
    start_page: Int
    end_page: Int

    # Matter classification
    matter_type: String
    classification_reasoning: String

    # Hierarchy
    parent_id: String

    # Source tracking
    source: String

    # Text content
    mechanical_text: String
    polished_text: String
    word_count: Int

    # Polish edits (JSON array of {old_text, new_text, reason})
    edits_applied_json: String

    # Processing state
    extract_complete: Boolean
    polish_complete: Boolean
    polish_failed: Boolean
    polish_retries: Int

    # One-to-many: Chapter has many Paragraphs
    paragraphs: [Paragraph]
}
