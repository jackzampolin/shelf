// Package swagger Code generated by swaggo/swag. DO NOT EDIT
package swagger

import "github.com/swaggo/swag"

const docTemplate = `{
    "schemes": {{ marshal .Schemes }},
    "swagger": "2.0",
    "info": {
        "description": "{{escape .Description}}",
        "title": "{{.Title}}",
        "contact": {
            "name": "API Support",
            "url": "https://github.com/jackzampolin/shelf"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "{{.Version}}"
    },
    "host": "{{.Host}}",
    "basePath": "{{.BasePath}}",
    "paths": {
        "/api/agent-logs/{id}": {
            "get": {
                "description": "Get full agent log including messages and tool calls",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "agent-logs"
                ],
                "summary": "Get agent log details",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Agent Log ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.AgentLogDetailResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books": {
            "get": {
                "description": "List all books in the library",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "List books",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ListBooksResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/ingest": {
            "post": {
                "description": "Ingest PDF files as a new book and start processing",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "Ingest book scans",
                "parameters": [
                    {
                        "description": "Ingest request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.IngestRequest"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.IngestResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/ingest/upload": {
            "post": {
                "description": "Upload PDF files to ingest as a new book",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "Upload and ingest book PDFs",
                "parameters": [
                    {
                        "type": "file",
                        "description": "PDF files to ingest",
                        "name": "files",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Book title (derived from filename if not provided)",
                        "name": "title",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "description": "Book author",
                        "name": "author",
                        "in": "formData"
                    },
                    {
                        "type": "boolean",
                        "description": "Automatically start processing after ingest",
                        "name": "auto_process",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.IngestResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{book_id}/agent-logs": {
            "get": {
                "description": "Get all agent execution logs for a book",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "agent-logs"
                ],
                "summary": "List agent logs for a book",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Filter by stage (toc-pattern, toc-discover, toc-validate, structure-classify, structure-polish)",
                        "name": "stage",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by agent type",
                        "name": "agent_type",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by job ID",
                        "name": "job_id",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.AgentLogsListResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{book_id}/pages": {
            "get": {
                "description": "List all pages for a book with processing status",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "pages"
                ],
                "summary": "List pages",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ListPagesResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{book_id}/pages/{page_num}": {
            "get": {
                "description": "Get full details for a specific page including OCR results, blend output, and labels",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "pages"
                ],
                "summary": "Get page details",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Page number (1-indexed)",
                        "name": "page_num",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.GetPageResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{book_id}/pages/{page_num}/image": {
            "get": {
                "description": "Get the PNG image for a specific page of a book",
                "produces": [
                    "image/png"
                ],
                "tags": [
                    "pages"
                ],
                "summary": "Get page image",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Page number (1-indexed)",
                        "name": "page_num",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{book_id}/rerun-toc": {
            "post": {
                "description": "Reset ToC state and rerun the ToC finder and extractor agents",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "Rerun ToC finder and extractor",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.RerunTocResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "412": {
                        "description": "Not enough pages have blend complete",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{id}": {
            "get": {
                "description": "Get detailed information about a book",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "Get book by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.Book"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{id}/chapters": {
            "get": {
                "description": "Get chapter structure with page content",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "Get book chapters",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "boolean",
                        "description": "Include page text content",
                        "name": "include_text",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Include paragraphs",
                        "name": "include_paragraphs",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ChaptersResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{id}/cost": {
            "get": {
                "description": "Get total cost for processing a specific book",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books"
                ],
                "summary": "Get book processing cost",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Breakdown by: stage",
                        "name": "by",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.MetricsCostResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{id}/metrics/detailed": {
            "get": {
                "description": "Get detailed metrics for a specific book including latency percentiles and token breakdowns per stage",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "books",
                    "metrics"
                ],
                "summary": "Get detailed book metrics with percentiles",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.MetricsDetailedResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{id}/prompts": {
            "get": {
                "description": "Get all prompts resolved for a specific book (with overrides applied)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "prompts"
                ],
                "summary": "List prompts for a book",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.BookPromptsListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/books/{id}/prompts/{key}": {
            "get": {
                "description": "Get a specific prompt resolved for a book (with override if exists)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "prompts"
                ],
                "summary": "Get a prompt for a book",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Prompt key",
                        "name": "key",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.BookPromptResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            },
            "put": {
                "description": "Set a custom prompt for a specific book",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "prompts"
                ],
                "summary": "Set a book prompt override",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Prompt key",
                        "name": "key",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Prompt override",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.SetPromptRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.BookPromptResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "Remove a custom prompt override for a book (reverts to default)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "prompts"
                ],
                "summary": "Clear a book prompt override",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Prompt key",
                        "name": "key",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.BookPromptResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "description": "Basic health check endpoint",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "health"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.HealthResponse"
                        }
                    }
                }
            }
        },
        "/api/jobs": {
            "get": {
                "description": "List all jobs with optional filtering",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "List jobs",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by status",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by job type",
                        "name": "job_type",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by book ID",
                        "name": "book_id",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ListJobsResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "Create a new job of the specified type",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "Create a job",
                "parameters": [
                    {
                        "description": "Job creation request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.CreateJobRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.CreateJobResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/jobs/start/{book_id}": {
            "post": {
                "description": "Start processing job (OCR, blend, label) for a book",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "Start job for a book",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Optional job type",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.StartJobRequest"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.StartJobResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/jobs/status/{book_id}": {
            "get": {
                "description": "Get processing status for a book's jobs",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "Get job status for a book",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Job type (default: process-book)",
                        "name": "job_type",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.JobStatusResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/jobs/status/{book_id}/detailed": {
            "get": {
                "description": "Get comprehensive processing status including per-provider OCR progress, costs, metadata, and ToC details",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "Get detailed job status for a book",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.DetailedJobStatusResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/jobs/{id}": {
            "get": {
                "description": "Get detailed job information including live status for running jobs",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "Get job by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.GetJobResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "Delete a job by ID",
                "tags": [
                    "jobs"
                ],
                "summary": "Delete a job",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "Update job status or metadata",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "jobs"
                ],
                "summary": "Update a job",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Update request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.UpdateJobRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_jobs.Record"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/llmcalls": {
            "get": {
                "description": "Get LLM call history with optional filters",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "llmcalls"
                ],
                "summary": "List LLM calls",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by book ID",
                        "name": "book_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by page ID",
                        "name": "page_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by job ID",
                        "name": "job_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by prompt key",
                        "name": "prompt_key",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by provider",
                        "name": "provider",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by model",
                        "name": "model",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Filter by success status (true or false)",
                        "name": "success",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Max results (default 100)",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Result offset",
                        "name": "offset",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter calls after this RFC3339 timestamp",
                        "name": "after",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter calls before this RFC3339 timestamp",
                        "name": "before",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.LLMCallsResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/llmcalls/counts/{book_id}": {
            "get": {
                "description": "Get count of LLM calls grouped by prompt key for a book",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "llmcalls"
                ],
                "summary": "Get LLM call counts by prompt key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Book ID",
                        "name": "book_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.LLMCallCountsResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/llmcalls/{id}": {
            "get": {
                "description": "Get a single LLM call by ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "llmcalls"
                ],
                "summary": "Get an LLM call",
                "parameters": [
                    {
                        "type": "string",
                        "description": "LLM call ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.LLMCallResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/metrics": {
            "get": {
                "description": "List LLM/OCR call metrics with optional filtering",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "metrics"
                ],
                "summary": "List metrics",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by job ID",
                        "name": "job_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by book ID",
                        "name": "book_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by stage",
                        "name": "stage",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by provider",
                        "name": "provider",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by model",
                        "name": "model",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Maximum results (default 100)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ListMetricsResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/metrics/cost": {
            "get": {
                "description": "Get total cost with optional breakdown by stage/provider/model",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "metrics"
                ],
                "summary": "Get cost breakdown",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by job ID",
                        "name": "job_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by book ID",
                        "name": "book_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by stage",
                        "name": "stage",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by provider",
                        "name": "provider",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by model",
                        "name": "model",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Breakdown by: stage, provider, or model",
                        "name": "by",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.MetricsCostResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/metrics/detailed": {
            "get": {
                "description": "Get detailed metrics including latency percentiles (p50, p95, p99) and token breakdowns per stage",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "metrics"
                ],
                "summary": "Get detailed metrics with percentiles",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by book ID",
                        "name": "book_id",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.MetricsDetailedResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/metrics/summary": {
            "get": {
                "description": "Get aggregated metrics summary with counts, costs, and timing",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "metrics"
                ],
                "summary": "Get metrics summary",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Filter by job ID",
                        "name": "job_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by book ID",
                        "name": "book_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by stage",
                        "name": "stage",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by provider",
                        "name": "provider",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by model",
                        "name": "model",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.MetricsSummaryResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/prompts": {
            "get": {
                "description": "Get all registered prompts with their embedded defaults",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "prompts"
                ],
                "summary": "List all prompts",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.PromptsListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/prompts/{key}": {
            "get": {
                "description": "Get a specific prompt by key",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "prompts"
                ],
                "summary": "Get a prompt",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Prompt key (e.g., stages.blend.system)",
                        "name": "key",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.PromptResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/ready": {
            "get": {
                "description": "Readiness check including DefraDB status",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "health"
                ],
                "summary": "Readiness check",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.HealthResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.HealthResponse"
                        }
                    }
                }
            }
        },
        "/api/settings": {
            "get": {
                "description": "Get all configuration settings",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "settings"
                ],
                "summary": "List all settings",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.SettingsResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/settings/reset/{key}": {
            "post": {
                "description": "Reset a configuration setting to its default value",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "settings"
                ],
                "summary": "Reset a setting to default",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Setting key (URL-encoded)",
                        "name": "key",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.SettingResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/settings/{key}": {
            "get": {
                "description": "Get a single configuration setting by key",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "settings"
                ],
                "summary": "Get a setting",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Setting key (URL-encoded)",
                        "name": "key",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.SettingResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            },
            "put": {
                "description": "Update a configuration setting",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "settings"
                ],
                "summary": "Update a setting",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Setting key (URL-encoded)",
                        "name": "key",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "New value",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.UpdateSettingRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.SettingResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/status": {
            "get": {
                "description": "Get detailed server status including providers and DefraDB",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "health"
                ],
                "summary": "Server status",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/internal_server_endpoints.StatusResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "github_com_jackzampolin_shelf_internal_config.Entry": {
            "type": "object",
            "properties": {
                "_docID": {
                    "description": "DefraDB document ID",
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "key": {
                    "type": "string"
                },
                "value": {}
            }
        },
        "github_com_jackzampolin_shelf_internal_jobs.ProviderProgress": {
            "type": "object",
            "properties": {
                "completed": {
                    "description": "Completed during this job execution",
                    "type": "integer"
                },
                "completedAtStart": {
                    "description": "Already completed before job started (from DefraDB)",
                    "type": "integer"
                },
                "failed": {
                    "description": "Failed during this job execution",
                    "type": "integer"
                },
                "queued": {
                    "description": "Currently queued/in-flight",
                    "type": "integer"
                },
                "totalExpected": {
                    "description": "Total work units expected for this provider",
                    "type": "integer"
                }
            }
        },
        "github_com_jackzampolin_shelf_internal_jobs.Record": {
            "type": "object",
            "properties": {
                "_docID": {
                    "type": "string"
                },
                "book_id": {
                    "type": "string"
                },
                "completed_at": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "error": {
                    "type": "string"
                },
                "job_type": {
                    "type": "string"
                },
                "metadata": {
                    "type": "object",
                    "additionalProperties": {}
                },
                "started_at": {
                    "type": "string"
                },
                "status": {
                    "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_jobs.Status"
                }
            }
        },
        "github_com_jackzampolin_shelf_internal_jobs.Status": {
            "type": "string",
            "enum": [
                "queued",
                "running",
                "completed",
                "failed",
                "cancelled"
            ],
            "x-enum-varnames": [
                "StatusQueued",
                "StatusRunning",
                "StatusCompleted",
                "StatusFailed",
                "StatusCancelled"
            ]
        },
        "github_com_jackzampolin_shelf_internal_jobs.WorkerStatusInfo": {
            "type": "object",
            "properties": {
                "queue_depth": {
                    "type": "integer"
                },
                "rate_limiter": {
                    "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_providers.RateLimiterStatus"
                },
                "type": {
                    "type": "string"
                }
            }
        },
        "github_com_jackzampolin_shelf_internal_llmcall.Call": {
            "type": "object",
            "properties": {
                "book_id": {
                    "description": "Context references",
                    "type": "string"
                },
                "error": {
                    "type": "string"
                },
                "id": {
                    "description": "Unique identifier",
                    "type": "string"
                },
                "input_tokens": {
                    "description": "Token usage",
                    "type": "integer"
                },
                "job_id": {
                    "type": "string"
                },
                "latency_ms": {
                    "type": "integer"
                },
                "model": {
                    "type": "string"
                },
                "output_tokens": {
                    "type": "integer"
                },
                "page_id": {
                    "type": "string"
                },
                "prompt_cid": {
                    "description": "Content-addressed ID linking to the exact prompt version used",
                    "type": "string"
                },
                "prompt_key": {
                    "description": "Prompt traceability",
                    "type": "string"
                },
                "provider": {
                    "description": "Model info",
                    "type": "string"
                },
                "response": {
                    "description": "Response",
                    "type": "string"
                },
                "success": {
                    "description": "Status",
                    "type": "boolean"
                },
                "temperature": {
                    "type": "number"
                },
                "timestamp": {
                    "description": "Timing",
                    "type": "string"
                },
                "tool_calls": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                }
            }
        },
        "github_com_jackzampolin_shelf_internal_metrics.DetailedStats": {
            "type": "object",
            "properties": {
                "avg_completion_tokens": {
                    "type": "number"
                },
                "avg_cost_usd": {
                    "type": "number"
                },
                "avg_prompt_tokens": {
                    "description": "Average tokens per call",
                    "type": "number"
                },
                "avg_reasoning_tokens": {
                    "type": "number"
                },
                "avg_total_tokens": {
                    "type": "number"
                },
                "count": {
                    "description": "Basic counts",
                    "type": "integer"
                },
                "error_count": {
                    "type": "integer"
                },
                "latency_avg": {
                    "type": "number"
                },
                "latency_max": {
                    "type": "number"
                },
                "latency_min": {
                    "type": "number"
                },
                "latency_p50": {
                    "description": "Latency percentiles (seconds)",
                    "type": "number"
                },
                "latency_p95": {
                    "type": "number"
                },
                "latency_p99": {
                    "type": "number"
                },
                "success_count": {
                    "type": "integer"
                },
                "total_completion_tokens": {
                    "type": "integer"
                },
                "total_cost_usd": {
                    "description": "Cost",
                    "type": "number"
                },
                "total_prompt_tokens": {
                    "description": "Token stats",
                    "type": "integer"
                },
                "total_reasoning_tokens": {
                    "type": "integer"
                },
                "total_tokens": {
                    "type": "integer"
                }
            }
        },
        "github_com_jackzampolin_shelf_internal_metrics.Metric": {
            "type": "object",
            "properties": {
                "_docID": {
                    "type": "string"
                },
                "book_id": {
                    "type": "string"
                },
                "completion_tokens": {
                    "type": "integer"
                },
                "cost_usd": {
                    "description": "Cost and tokens",
                    "type": "number"
                },
                "created_at": {
                    "description": "Metadata",
                    "type": "string"
                },
                "error_type": {
                    "type": "string"
                },
                "execution_seconds": {
                    "type": "number"
                },
                "item_key": {
                    "description": "e.g., \"page_0001\", \"toc_entry_5\"",
                    "type": "string"
                },
                "job_id": {
                    "description": "Attribution (for filtering/aggregation)",
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "output_cid": {
                    "description": "Exact version (CID)",
                    "type": "string"
                },
                "output_doc_id": {
                    "description": "Output reference (version-specific)",
                    "type": "string"
                },
                "output_type": {
                    "description": "Collection name",
                    "type": "string"
                },
                "prompt_tokens": {
                    "type": "integer"
                },
                "provider": {
                    "description": "Provider info",
                    "type": "string"
                },
                "queue_seconds": {
                    "description": "Timing",
                    "type": "number"
                },
                "reasoning_tokens": {
                    "type": "integer"
                },
                "stage": {
                    "type": "string"
                },
                "success": {
                    "description": "Status",
                    "type": "boolean"
                },
                "total_seconds": {
                    "type": "number"
                },
                "total_tokens": {
                    "type": "integer"
                }
            }
        },
        "github_com_jackzampolin_shelf_internal_providers.RateLimiterStatus": {
            "type": "object",
            "properties": {
                "last_429_time": {
                    "type": "string"
                },
                "rps": {
                    "type": "number"
                },
                "time_until_token": {
                    "$ref": "#/definitions/time.Duration"
                },
                "tokens_available": {
                    "type": "number"
                },
                "total_consumed": {
                    "type": "integer"
                },
                "total_waited": {
                    "$ref": "#/definitions/time.Duration"
                },
                "utilization": {
                    "type": "number"
                }
            }
        },
        "internal_server_endpoints.AgentLogDetailResponse": {
            "type": "object",
            "properties": {
                "agent_type": {
                    "type": "string"
                },
                "book_id": {
                    "type": "string"
                },
                "completed_at": {
                    "type": "string"
                },
                "error": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "iterations": {
                    "type": "integer"
                },
                "job_id": {
                    "type": "string"
                },
                "messages": {
                    "description": "Detailed data",
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "result": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "started_at": {
                    "type": "string"
                },
                "success": {
                    "type": "boolean"
                },
                "tool_calls": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                }
            }
        },
        "internal_server_endpoints.AgentLogSummary": {
            "type": "object",
            "properties": {
                "agent_type": {
                    "type": "string"
                },
                "completed_at": {
                    "type": "string"
                },
                "error": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "iterations": {
                    "type": "integer"
                },
                "started_at": {
                    "type": "string"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "internal_server_endpoints.AgentLogSummaryResponse": {
            "type": "object",
            "properties": {
                "agent_type": {
                    "type": "string"
                },
                "book_id": {
                    "type": "string"
                },
                "completed_at": {
                    "type": "string"
                },
                "error": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "iterations": {
                    "type": "integer"
                },
                "job_id": {
                    "type": "string"
                },
                "started_at": {
                    "type": "string"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "internal_server_endpoints.AgentLogsListResponse": {
            "type": "object",
            "properties": {
                "logs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.AgentLogSummaryResponse"
                    }
                }
            }
        },
        "internal_server_endpoints.Book": {
            "type": "object",
            "properties": {
                "author": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "page_count": {
                    "type": "integer"
                },
                "status": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.BookMetadata": {
            "type": "object",
            "properties": {
                "author": {
                    "type": "string"
                },
                "authors": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "description": {
                    "type": "string"
                },
                "isbn": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "lccn": {
                    "type": "string"
                },
                "publication_year": {
                    "type": "integer"
                },
                "publisher": {
                    "type": "string"
                },
                "subjects": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.BookPromptResponse": {
            "type": "object",
            "properties": {
                "cid": {
                    "type": "string"
                },
                "is_override": {
                    "type": "boolean"
                },
                "key": {
                    "type": "string"
                },
                "text": {
                    "type": "string"
                },
                "variables": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "internal_server_endpoints.BookPromptsListResponse": {
            "type": "object",
            "properties": {
                "book_id": {
                    "type": "string"
                },
                "prompts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.BookPromptResponse"
                    }
                }
            }
        },
        "internal_server_endpoints.ChapterPage": {
            "type": "object",
            "properties": {
                "blended_text": {
                    "type": "string"
                },
                "label": {
                    "type": "string"
                },
                "page_num": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.ChapterParagraph": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "polished_text": {
                    "type": "string"
                },
                "raw_text": {
                    "type": "string"
                },
                "sort_order": {
                    "type": "integer"
                },
                "start_page": {
                    "type": "integer"
                },
                "word_count": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.ChapterWithText": {
            "type": "object",
            "properties": {
                "classification_reasoning": {
                    "type": "string"
                },
                "edits_applied_json": {
                    "type": "string"
                },
                "end_page": {
                    "type": "integer"
                },
                "entry_id": {
                    "type": "string"
                },
                "entry_number": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "level": {
                    "type": "integer"
                },
                "level_name": {
                    "type": "string"
                },
                "matter_type": {
                    "type": "string"
                },
                "page_count": {
                    "type": "integer"
                },
                "pages": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.ChapterPage"
                    }
                },
                "paragraphs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.ChapterParagraph"
                    }
                },
                "polish_complete": {
                    "type": "boolean"
                },
                "polish_failed": {
                    "type": "boolean"
                },
                "polished_text": {
                    "type": "string"
                },
                "sort_order": {
                    "type": "integer"
                },
                "start_page": {
                    "type": "integer"
                },
                "title": {
                    "type": "string"
                },
                "word_count": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.ChaptersResponse": {
            "type": "object",
            "properties": {
                "book_id": {
                    "type": "string"
                },
                "book_title": {
                    "type": "string"
                },
                "chapters": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.ChapterWithText"
                    }
                },
                "has_chapters": {
                    "type": "boolean"
                },
                "total_pages": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.CreateJobRequest": {
            "type": "object",
            "properties": {
                "job_type": {
                    "type": "string"
                },
                "metadata": {
                    "type": "object",
                    "additionalProperties": {}
                }
            }
        },
        "internal_server_endpoints.CreateJobResponse": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.DefraStatus": {
            "type": "object",
            "properties": {
                "container": {
                    "type": "string"
                },
                "health": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.DetailedJobStatusResponse": {
            "type": "object",
            "properties": {
                "agent_logs": {
                    "description": "Agent logs summary",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.AgentLogSummary"
                    }
                },
                "book_id": {
                    "type": "string"
                },
                "metadata": {
                    "description": "Metadata status",
                    "allOf": [
                        {
                            "$ref": "#/definitions/internal_server_endpoints.MetadataStatus"
                        }
                    ]
                },
                "ocr_progress": {
                    "description": "Per-provider OCR progress",
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/internal_server_endpoints.ProviderProgress"
                    }
                },
                "stages": {
                    "description": "Stage progress with costs",
                    "allOf": [
                        {
                            "$ref": "#/definitions/internal_server_endpoints.StageProgress"
                        }
                    ]
                },
                "structure": {
                    "description": "Structure status (common-structure job)",
                    "allOf": [
                        {
                            "$ref": "#/definitions/internal_server_endpoints.StructureStatus"
                        }
                    ]
                },
                "toc": {
                    "description": "ToC status",
                    "allOf": [
                        {
                            "$ref": "#/definitions/internal_server_endpoints.ToCStatus"
                        }
                    ]
                },
                "total_pages": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.ErrorResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.GetJobResponse": {
            "type": "object",
            "properties": {
                "_docID": {
                    "type": "string"
                },
                "book_id": {
                    "type": "string"
                },
                "completed_at": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "error": {
                    "type": "string"
                },
                "job_type": {
                    "type": "string"
                },
                "live_status": {
                    "description": "Live status fields (only populated for running jobs)",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "metadata": {
                    "type": "object",
                    "additionalProperties": {}
                },
                "pending_units": {
                    "type": "integer"
                },
                "progress": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_jobs.ProviderProgress"
                    }
                },
                "started_at": {
                    "type": "string"
                },
                "status": {
                    "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_jobs.Status"
                },
                "worker_status": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_jobs.WorkerStatusInfo"
                    }
                }
            }
        },
        "internal_server_endpoints.GetPageResponse": {
            "type": "object",
            "properties": {
                "blend_confidence": {
                    "type": "number"
                },
                "blend_markdown": {
                    "type": "string"
                },
                "labels": {
                    "$ref": "#/definitions/internal_server_endpoints.PageLabels"
                },
                "ocr_results": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.OcrResult"
                    }
                },
                "page_num": {
                    "type": "integer"
                },
                "status": {
                    "$ref": "#/definitions/internal_server_endpoints.PageStatus"
                }
            }
        },
        "internal_server_endpoints.HealthResponse": {
            "type": "object",
            "properties": {
                "defra": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.IngestRequest": {
            "type": "object",
            "properties": {
                "author": {
                    "type": "string"
                },
                "pdf_paths": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.IngestResponse": {
            "type": "object",
            "properties": {
                "author": {
                    "type": "string"
                },
                "book_id": {
                    "type": "string"
                },
                "job_id": {
                    "type": "string"
                },
                "process_job_id": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.JobStatusResponse": {
            "type": "object",
            "properties": {
                "blend_complete": {
                    "type": "integer"
                },
                "book_id": {
                    "type": "string"
                },
                "is_complete": {
                    "type": "boolean"
                },
                "job_type": {
                    "type": "string"
                },
                "label_complete": {
                    "type": "integer"
                },
                "metadata_complete": {
                    "type": "boolean"
                },
                "ocr_complete": {
                    "type": "integer"
                },
                "toc_extracted": {
                    "type": "boolean"
                },
                "toc_found": {
                    "type": "boolean"
                },
                "total_pages": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.LLMCallCountsResponse": {
            "type": "object",
            "properties": {
                "counts": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "integer"
                    }
                }
            }
        },
        "internal_server_endpoints.LLMCallResponse": {
            "type": "object",
            "properties": {
                "call": {
                    "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_llmcall.Call"
                },
                "error": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.LLMCallsResponse": {
            "type": "object",
            "properties": {
                "calls": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_llmcall.Call"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.ListBooksResponse": {
            "type": "object",
            "properties": {
                "books": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.Book"
                    }
                }
            }
        },
        "internal_server_endpoints.ListJobsResponse": {
            "type": "object",
            "properties": {
                "jobs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_jobs.Record"
                    }
                }
            }
        },
        "internal_server_endpoints.ListMetricsResponse": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer"
                },
                "metrics": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_metrics.Metric"
                    }
                }
            }
        },
        "internal_server_endpoints.ListPagesResponse": {
            "type": "object",
            "properties": {
                "pages": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.PageSummary"
                    }
                },
                "total_pages": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.MetadataStatus": {
            "type": "object",
            "properties": {
                "complete": {
                    "type": "boolean"
                },
                "cost_usd": {
                    "type": "number"
                },
                "data": {
                    "$ref": "#/definitions/internal_server_endpoints.BookMetadata"
                },
                "failed": {
                    "type": "boolean"
                },
                "started": {
                    "type": "boolean"
                }
            }
        },
        "internal_server_endpoints.MetricsCostResponse": {
            "type": "object",
            "properties": {
                "breakdown": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "number",
                        "format": "float64"
                    }
                },
                "total_cost_usd": {
                    "type": "number"
                }
            }
        },
        "internal_server_endpoints.MetricsDetailedResponse": {
            "type": "object",
            "properties": {
                "book_id": {
                    "type": "string"
                },
                "stages": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_metrics.DetailedStats"
                    }
                }
            }
        },
        "internal_server_endpoints.MetricsSummaryResponse": {
            "type": "object",
            "properties": {
                "avg_cost_usd": {
                    "type": "number"
                },
                "avg_time_seconds": {
                    "type": "number"
                },
                "avg_tokens": {
                    "type": "number"
                },
                "count": {
                    "type": "integer"
                },
                "error_count": {
                    "type": "integer"
                },
                "success_count": {
                    "type": "integer"
                },
                "total_cost_usd": {
                    "type": "number"
                },
                "total_time_seconds": {
                    "type": "number"
                },
                "total_tokens": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.OcrResult": {
            "type": "object",
            "properties": {
                "confidence": {
                    "type": "number"
                },
                "provider": {
                    "type": "string"
                },
                "text": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.PageLabels": {
            "type": "object",
            "properties": {
                "is_back_matter": {
                    "type": "boolean"
                },
                "is_front_matter": {
                    "type": "boolean"
                },
                "is_toc_page": {
                    "type": "boolean"
                },
                "page_number_label": {
                    "type": "string"
                },
                "running_header": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.PageStatus": {
            "type": "object",
            "properties": {
                "blend_complete": {
                    "type": "boolean"
                },
                "extract_complete": {
                    "type": "boolean"
                },
                "label_complete": {
                    "type": "boolean"
                },
                "ocr_complete": {
                    "type": "boolean"
                }
            }
        },
        "internal_server_endpoints.PageSummary": {
            "type": "object",
            "properties": {
                "blend_complete": {
                    "type": "boolean"
                },
                "label_complete": {
                    "type": "boolean"
                },
                "ocr_complete": {
                    "type": "boolean"
                },
                "page_num": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.PromptResponse": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "doc_id": {
                    "type": "string"
                },
                "hash": {
                    "type": "string"
                },
                "key": {
                    "type": "string"
                },
                "text": {
                    "type": "string"
                },
                "variables": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "internal_server_endpoints.PromptsListResponse": {
            "type": "object",
            "properties": {
                "prompts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.PromptResponse"
                    }
                }
            }
        },
        "internal_server_endpoints.ProviderProgress": {
            "type": "object",
            "properties": {
                "complete": {
                    "type": "integer"
                },
                "cost_usd": {
                    "type": "number"
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.ProvidersStatus": {
            "type": "object",
            "properties": {
                "llm": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "ocr": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "internal_server_endpoints.RerunTocResponse": {
            "type": "object",
            "properties": {
                "job_id": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.SetPromptRequest": {
            "type": "object",
            "properties": {
                "note": {
                    "type": "string"
                },
                "text": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.SettingResponse": {
            "type": "object",
            "properties": {
                "entry": {
                    "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_config.Entry"
                },
                "error": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.SettingsResponse": {
            "type": "object",
            "properties": {
                "settings": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/github_com_jackzampolin_shelf_internal_config.Entry"
                    }
                }
            }
        },
        "internal_server_endpoints.StageProgress": {
            "type": "object",
            "properties": {
                "blend": {
                    "type": "object",
                    "properties": {
                        "complete": {
                            "type": "integer"
                        },
                        "cost_usd": {
                            "type": "number"
                        },
                        "total": {
                            "type": "integer"
                        }
                    }
                },
                "label": {
                    "type": "object",
                    "properties": {
                        "complete": {
                            "type": "integer"
                        },
                        "cost_usd": {
                            "type": "number"
                        },
                        "total": {
                            "type": "integer"
                        }
                    }
                },
                "ocr": {
                    "type": "object",
                    "properties": {
                        "complete": {
                            "type": "integer"
                        },
                        "cost_by_provider": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "number",
                                "format": "float64"
                            }
                        },
                        "total": {
                            "type": "integer"
                        },
                        "total_cost_usd": {
                            "type": "number"
                        }
                    }
                }
            }
        },
        "internal_server_endpoints.StartJobRequest": {
            "type": "object",
            "properties": {
                "force": {
                    "description": "Optional: force restart even if already complete",
                    "type": "boolean"
                },
                "job_type": {
                    "description": "Optional: defaults to \"process-book\"",
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.StartJobResponse": {
            "type": "object",
            "properties": {
                "book_id": {
                    "type": "string"
                },
                "job_id": {
                    "type": "string"
                },
                "job_type": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.StatusResponse": {
            "type": "object",
            "properties": {
                "defra": {
                    "$ref": "#/definitions/internal_server_endpoints.DefraStatus"
                },
                "providers": {
                    "$ref": "#/definitions/internal_server_endpoints.ProvidersStatus"
                },
                "server": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.StructureStatus": {
            "type": "object",
            "properties": {
                "chapter_count": {
                    "type": "integer"
                },
                "complete": {
                    "type": "boolean"
                },
                "cost_usd": {
                    "type": "number"
                },
                "failed": {
                    "type": "boolean"
                },
                "retries": {
                    "type": "integer"
                },
                "started": {
                    "type": "boolean"
                }
            }
        },
        "internal_server_endpoints.ToCEntry": {
            "type": "object",
            "properties": {
                "actual_page_num": {
                    "type": "integer"
                },
                "entry_number": {
                    "type": "string"
                },
                "is_linked": {
                    "type": "boolean"
                },
                "level": {
                    "type": "integer"
                },
                "level_name": {
                    "type": "string"
                },
                "printed_page_number": {
                    "type": "string"
                },
                "sort_order": {
                    "type": "integer"
                },
                "source": {
                    "description": "\"extracted\" or \"discovered\"",
                    "type": "string"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.ToCStatus": {
            "type": "object",
            "properties": {
                "cost_usd": {
                    "type": "number"
                },
                "end_page": {
                    "type": "integer"
                },
                "entries": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/internal_server_endpoints.ToCEntry"
                    }
                },
                "entries_discovered": {
                    "type": "integer"
                },
                "entries_linked": {
                    "type": "integer"
                },
                "entry_count": {
                    "description": "Entries (when extracted)",
                    "type": "integer"
                },
                "extract_complete": {
                    "type": "boolean"
                },
                "extract_failed": {
                    "type": "boolean"
                },
                "extract_started": {
                    "description": "Extract stage",
                    "type": "boolean"
                },
                "finalize_complete": {
                    "type": "boolean"
                },
                "finalize_failed": {
                    "type": "boolean"
                },
                "finalize_retries": {
                    "type": "integer"
                },
                "finalize_started": {
                    "description": "Finalize stage",
                    "type": "boolean"
                },
                "finder_complete": {
                    "type": "boolean"
                },
                "finder_failed": {
                    "type": "boolean"
                },
                "finder_started": {
                    "description": "Finder stage",
                    "type": "boolean"
                },
                "found": {
                    "type": "boolean"
                },
                "link_complete": {
                    "type": "boolean"
                },
                "link_failed": {
                    "type": "boolean"
                },
                "link_retries": {
                    "type": "integer"
                },
                "link_started": {
                    "description": "Link stage",
                    "type": "boolean"
                },
                "start_page": {
                    "type": "integer"
                }
            }
        },
        "internal_server_endpoints.UpdateJobRequest": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                },
                "metadata": {
                    "type": "object",
                    "additionalProperties": {}
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "internal_server_endpoints.UpdateSettingRequest": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "value": {}
            }
        },
        "time.Duration": {
            "type": "integer",
            "format": "int64",
            "enum": [
                -9223372036854775808,
                9223372036854775807,
                1,
                1000,
                1000000,
                1000000000,
                60000000000,
                3600000000000
            ],
            "x-enum-varnames": [
                "minDuration",
                "maxDuration",
                "Nanosecond",
                "Microsecond",
                "Millisecond",
                "Second",
                "Minute",
                "Hour"
            ]
        }
    }
}`

// SwaggerInfo holds exported Swagger Info so clients can modify it
var SwaggerInfo = &swag.Spec{
	Version:          "1.0",
	Host:             "localhost:8080",
	BasePath:         "/",
	Schemes:          []string{},
	Title:            "Shelf API",
	Description:      "Book digitization pipeline API for managing books, jobs, and processing.",
	InfoInstanceName: "swagger",
	SwaggerTemplate:  docTemplate,
	LeftDelim:        "{{",
	RightDelim:       "}}",
}

func init() {
	swag.Register(SwaggerInfo.InstanceName(), SwaggerInfo)
}
