{% extends "base.html" %}

{% block title %}Correction Viewer - {{ scan_id }}{% endblock %}

{% block content %}
<div class="page-header">
    <h2>{{ scan_id }}</h2>
    <div class="page-selector">
        <label for="page-select">Page:</label>
        <select id="page-select"
                name="page"
                hx-get="/api/corrections/{{ scan_id }}/page"
                hx-target="#page-content"
                hx-swap="innerHTML"
                hx-push-url="true"
                hx-include="this">
            {% for p in all_pages %}
            <option value="{{ p }}" {% if p == current_page %}selected{% endif %}>{{ p }}</option>
            {% endfor %}
        </select>
        {% if current_page > 1 %}
        <button hx-get="/corrections/{{ scan_id }}/{{ current_page - 1 }}"
                hx-target="body"
                hx-swap="innerHTML"
                hx-push-url="true">← Previous</button>
        {% else %}
        <button disabled>← Previous</button>
        {% endif %}
        {% if current_page < all_pages|length %}
        <button hx-get="/corrections/{{ scan_id }}/{{ current_page + 1 }}"
                hx-target="body"
                hx-swap="innerHTML"
                hx-push-url="true">Next →</button>
        {% else %}
        <button disabled>Next →</button>
        {% endif %}
    </div>
</div>

<div id="page-content">
    {% include 'corrections/_page_content.html' %}
</div>
{% endblock %}
